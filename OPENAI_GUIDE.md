# ü§ñ OpenAI ChatGPT Integration Guide

## üìã Quick Summary

Your Honeypot API now supports **two modes**:

| Mode | Description | Setup Required | Cost | Quality |
|------|-------------|----------------|------|---------|
| **Template Mode** | Pre-written responses | ‚ùå None | ‚úÖ Free | ‚≠ê‚≠ê‚≠ê Good |
| **ChatGPT Mode** | AI-generated responses | ‚úÖ OpenAI API key | üí∞ ~$0.0001/msg | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Excellent |

---

## üéØ Current Setup (Template Mode - Recommended for Hackathon)

Your `.env` file is currently set to:

```bash
USE_OPENAI=false
```

**This means:**
- ‚úÖ Works **immediately** without any extra setup
- ‚úÖ **Completely free**
- ‚úÖ Uses smart template-based responses
- ‚úÖ **Perfect for hackathon submission**
- ‚úÖ Can deploy to Railway right now

**You don't need to change anything!** This mode is sufficient for the hackathon.

---

## ü§ñ Optional:Enable ChatGPT Mode (Advanced)

If you want to use OpenAI ChatGPT for even more natural responses:

### **Step 1: Get OpenAI API Key**

1. **Sign up for OpenAI:**
   - Go to: https://platform.openai.com/signup
   - Create account (use your email or Google/Microsoft)

2. **Add Payment Method:**
   - Go to: https://platform.openai.com/account/billing
   - Click "Add payment method"
   - Add $5-$10 (this will last a LONG time)
   - **Cost:** ~$0.0001 per conversation turn (1000 messages = $0.10)

3. **Create API Key:**
   - Go to: https://platform.openai.com/api-keys
   - Click "Create new secret key"
   - Name it: "Honeypot API"
   - Copy the key (starts with `sk-proj-...`)
   - ‚ö†Ô∏è **Save it somewhere safe!** You can't see it again

### **Step 2: Update Environment Variables**

**Local (.env file):**
```bash
PORT=3000
API_KEY=honeypot-guvi-2026-secure-key
NODE_ENV=development
OPENAI_API_KEY=sk-proj-YOUR-ACTUAL-API-KEY-HERE
USE_OPENAI=true
```

**Railway Deployment:**
1. Go to your Railway project dashboard
2. Click "Variables" tab
3. Add new variable:
   - Name: `OPENAI_API_KEY`
   - Value: `sk-proj-YOUR-ACTUAL-KEY`
4. Add another:
   - Name: `USE_OPENAI`
   - Value: `true`
5. Redeploy

### **Step 3: Test It**

Restart your server and test:

```powershell
# Check if OpenAI is enabled (look for this in console)
# Should see: "ü§ñ OpenAI ChatGPT enabled for intelligent responses"

# Test conversation
$headers = @{
    "Content-Type" = "application/json"
    "x-api-key" = "honeypot-guvi-2026-secure-key"
}

$body = @{
    scammerMessage = "Your account will be blocked. Share OTP now!"
    stressScore = 7
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:3000/api/conversation" `
  -Method Post -Headers $headers -Body $body | ConvertTo-Json
```

You should see **unique, contextual responses** generated by ChatGPT!

---

## üîÑ How It Works

### **Template Mode (USE_OPENAI=false):**
```
Scammer: "Your account is blocked!"
Agent Logic: 
  1. Phase = SHOCK
  2. Random template: "What happened sir?"
  3. Add intent: "+ Sir what is the procedure?"
Response: "What happened sir? Sir what is the procedure?"
```

### **ChatGPT Mode (USE_OPENAI=true):**
```
Scammer: "Your account is blocked!"
Agent sends to ChatGPT:
  System: "You are a stressed Indian user. Phase: SHOCK. Stress: 7/10"
  User: "Scammer said: Your account is blocked!"
  
ChatGPT generates: "Sir what happened? I'm very worried, is my money safe?"

Response: (Natural, context-aware, unique every time)
```

---

## üí∞ Cost Breakdown

### **Template Mode:**
- Cost per message: **$0** (free)
- Total cost for 1000 messages: **$0**

### **ChatGPT Mode:**
- Model: gpt-4o-mini (fastest, cheapest)
- Cost per message: **~$0.0001**
- Total cost for 1000 messages: **~$0.10**
- Total cost for 10,000 messages: **~$1.00**

**For hackathon:** Even with 100 test conversations, you'll spend less than $0.10!

---

## üé® Response Quality Comparison

### **Example Conversation:**

**Scammer:** "URGENT: Your HDFC account frozen. Click bit.ly/verify123"

**Template Mode Response:**
```
"Sir what is the problem? Sir can you send me official link?"
```

**ChatGPT Mode Response:**
```
"Oh no sir! My account is frozen? But I didn't receive any message from HDFC bank. Sir are you sure this is official?"
```

Both are good, but ChatGPT is more **natural and contextual**.

---

## ‚öôÔ∏è Configuration Options

In `.env`:

```bash
# Option 1: Template Mode (Free, Fast, Good)
USE_OPENAI=false
OPENAI_API_KEY=  # Not needed

# Option 2: ChatGPT Mode (Paid, Slower, Excellent)
USE_OPENAI=true
OPENAI_API_KEY=sk-proj-your-key-here
```

---

## üêõ Troubleshooting

### **Error: "OpenAI API key not found"**
- **Solution:** Set `OPENAI_API_KEY` in `.env` or set `USE_OPENAI=false`

### **Error: "Insufficient credits"**
- **Solution:** Add billing at https://platform.openai.com/account/billing

### **Slow responses**
- **Normal:** ChatGPT mode adds 1-2 seconds per response (API call time)
- **Solution:** Use template mode if speed is critical

### **Fallback Behavior**
If OpenAI fails, the agent automatically falls back to template mode!

---

## üìä Recommendation

### **For Hackathon Submission:**
‚úÖ **Use Template Mode (`USE_OPENAI=false`)**
- Reason: Free, fast, works immediately, good enough
- Deploy to Railway right now without any OpenAI setup

### **For Production/Demo:**
‚≠ê **Use ChatGPT Mode (`USE_OPENAI=true`)**
- Reason: More believable responses, better engagement
- Worth the minimal cost if showcasing to judges

---

## ‚úÖ Summary

**Right now (your current setup):**
```bash
USE_OPENAI=false  ‚Üê You're using Template Mode (FREE)
```

**This is perfect! You can:**
1. ‚úÖ Deploy to Railway immediately
2. ‚úÖ Submit to GUVI hackathon
3. ‚úÖ No costs involved
4. ‚úÖ Fully working honeypot API

**Later (optional upgrade):**
- Get OpenAI API key
- Set `USE_OPENAI=true`
- Add `OPENAI_API_KEY=sk-proj-...`
- Enjoy ChatGPT-powered responses

---

**Which mode should you use?**

- **For hackathon:** Template Mode ‚úÖ
- **For production:** ChatGPT Mode ‚≠ê
- **No money/time:** Template Mode ‚úÖ
- **Want best quality:** ChatGPT Mode ‚≠ê

Both modes work great! Choose based on your needs.
